<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.98.0"><meta name=generator content="Relearn 5.9.4"><meta name=description content><meta name=author content="Choria Project"><title>Transformations :: Choria Application Builder Documentation</title><link href=https://choria-io.github.io/appbuilder/css/fontawesome-all.min.css?1681828005 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://choria-io.github.io/appbuilder/css/fontawesome-all.min.css?1681828005 rel=stylesheet></noscript><link href=https://choria-io.github.io/appbuilder/css/featherlight.min.css?1681828005 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://choria-io.github.io/appbuilder/css/featherlight.min.css?1681828005 rel=stylesheet></noscript><link href=https://choria-io.github.io/appbuilder/css/auto-complete.css?1681828005 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://choria-io.github.io/appbuilder/css/auto-complete.css?1681828005 rel=stylesheet></noscript><link href=https://choria-io.github.io/appbuilder/css/perfect-scrollbar.min.css?1681828005 rel=stylesheet><link href=https://choria-io.github.io/appbuilder/css/nucleus.css?1681828005 rel=stylesheet><link href=https://choria-io.github.io/appbuilder/css/fonts.css?1681828005 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://choria-io.github.io/appbuilder/css/fonts.css?1681828005 rel=stylesheet></noscript><link href=https://choria-io.github.io/appbuilder/css/theme.css?1681828005 rel=stylesheet><link href=https://choria-io.github.io/appbuilder/css/theme-my-custom-variant.css?1681828005 rel=stylesheet id=variant-style><link href=https://choria-io.github.io/appbuilder/css/ie.css?1681828005 rel=stylesheet><link href=https://choria-io.github.io/appbuilder/css/variant.css?1681828005 rel=stylesheet><link href=https://choria-io.github.io/appbuilder/css/print.css?1681828005 rel=stylesheet media=print><script src=https://choria-io.github.io/appbuilder/js/url.js?1681828005></script>
<script src=https://choria-io.github.io/appbuilder/js/variant.js?1681828005></script>
<script>window.index_json_url="https://choria-io.github.io/appbuilder/index.json";var root_url="https://choria-io.github.io/appbuilder/",baseUriFull,baseUri=root_url.replace(/\/$/,'');window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://choria-io.github.io/appbuilder/",window.variants&&variants.init(["my-custom-variant"])</script><script src=https://choria-io.github.io/appbuilder/js/jquery.min.js?1681828005 defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YW7H6PL0TN"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YW7H6PL0TN",{anonymize_ip:!1})}</script><script src=https://cdn.counter.dev/script.js data-id=a4622abe-f6fa-4cac-a337-a4437915e4b3></script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=https://choria-io.github.io/appbuilder/reference/transformations/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable dir=ltr><div><div class=navigation><a class="nav nav-next" href=https://choria-io.github.io/appbuilder/reference/configuration/index.html title="Configuration (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=https://choria-io.github.io/appbuilder/reference/templating/index.html title="Templating (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title="Menu (CTRL+ALT+n)"><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title="Table of Contents (CTRL+ALT+t)"><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://choria-io.github.io/appbuilder/index.html><span itemprop=name>Choria Application Builder Documentation</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://choria-io.github.io/appbuilder/reference/index.html><span itemprop=name>Reference</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Transformations</span><meta itemprop=position content="3"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper dir=ltr><nav id=TableOfContents><ul><li><a href=#jq-transform>JQ Transform</a></li><li><a href=#to-json-transform>To JSON Transform</a></li><li><a href=#to-yaml-transform>To YAML Transform</a></li><li><a href=#bar-graph-transform>Bar Graph Transform</a></li><li><a href=#line-graph>Line Graph</a></li><li><a href=#templates>Templates</a></li><li><a href=#writing-to-a-file>Writing to a file</a></li><li><a href=#row-orientated-reports>Row orientated Reports</a></li><li><a href=#pipelines>Pipelines</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=transformations>Transformations</h1><p>Transformations is like a shell pipe defined in App Builder. We have a number of transformations and using them is entirely optional - often a shell pipe would be much better.</p><p>The reason for adding transformations like <code>jq</code> to App Builder itself is to have it function in places where that 3rd party dependency is not met. Rather than require everyone to install JQ - and handle that dependency, we just add a JQ dialect directly to App Builder.</p><p>A basic example of transformations can be seen here:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>ghd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>Gets the description of a Github Repo</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>exec</span>
</span></span><span style=display:flex><span><span style=color:#f92672>command</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  </span>  <span style=color:#ae81ff>curl -s -H &#34;Accept: application/vnd.github.v3+json&#34; https://api.github.com/repos/choria-io/appbuilder</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>jq</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>query</span>: <span style=color:#ae81ff>.description</span>
</span></span></code></pre></div><p>Here we call out a REST API that returns JSON payload using <code>curl</code> and then extract the <code>description</code> field from the result using a JQ transform</p><pre tabindex=0><code class=language-nohighlight data-lang=nohighlight>$ demo ghd
Tool to create friendly wrapping command lines over operations tools
</code></pre><p>Not every command supports transforms, so the individual command documentation will call out it out.</p><h2 id=jq-transform>JQ Transform</h2><p>The <code>jq</code> transform uses a dialect of JQ called <a href=https://github.com/itchyny/gojq target=_blank>GoJQ</a>, most of your JQ knowledge is transferable with only slight changes/additions. This is probably the most used transform so there&rsquo;s a little short cut to make using it a bit easier:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>jq</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>query</span>: <span style=color:#ae81ff>.description</span>
</span></span></code></pre></div><p>The <code>query</code> supports <a href=../templating>Templating</a>.</p><p>Since version <code>0.5.0</code> an optional <code>yaml_input</code> boolean can be set true to allow YAML input to be processed using JQ.</p><h2 id=to-json-transform>To JSON Transform</h2><p>The <code>to_json</code> transform can convert YAML or JSON format input into JSON format output. By default the output JSON will be compact unindented JSON, prefix and indent strings can be configured.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># unindented JSON output</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>to_json</span>: {}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Indented JSON output with a custom prefix</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>to_json</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>indent</span>: <span style=color:#e6db74>&#34;  &#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>prefix</span>: <span style=color:#e6db74>&#34;  &#34;</span>
</span></span></code></pre></div><h2 id=to-yaml-transform>To YAML Transform</h2><p>The <code>to_yaml</code> transform can convert JSON format input into YAML format output.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>to_yaml</span>: {}
</span></span></code></pre></div><p>The <code>to_yaml</code> transform has no options.</p><h2 id=bar-graph-transform>Bar Graph Transform</h2><p>This transform takes a JSON document like <code>{"x": 1, "y": 2}</code> as input and renders bars for the values.</p><p>Here is an example that draws the sizes of the assets of the latest release:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>bargraph</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>Draws an ASCII bar graph</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>exec</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pipeline</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>jq</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>query</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          </span>          <span style=color:#ae81ff>.assets|map({(.name): .size})|reduce .[] as $a ({}; . + $a)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>bar_graph</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>caption</span>: <span style=color:#e6db74>&#34;Release asset sizes&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>bytes</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>script</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  </span>  <span style=color:#ae81ff>curl -s https://api.github.com/repos/choria-io/appbuilder/releases/latest</span>
</span></span></code></pre></div><p>This uses a pipeline (see below) to transform a GitHub API request into a hash and then a <code>bar_graph</code> to render it:</p><pre tabindex=0><code class=language-nohighlight data-lang=nohighlight>$ demo bargraph
Latest release asset sizes

    appbuilder-0.1.1-windows-arm64.zip: ▏ (2.0 MiB)
            appbuilder-0.1.1-arm64.rpm: ██ (2.0 MiB)
   appbuilder-0.1.1-linux-arm64.tar.gz: ███ (2.0 MiB)
            appbuilder-0.1.1-arm64.deb: ███ (2.0 MiB)
     appbuilder-0.1.1-windows-arm7.zip: █████████████ (2.1 MiB)
     appbuilder-0.1.1-windows-arm6.zip: ██████████████ (2.1 MiB)
             appbuilder-0.1.1-arm7.rpm: ██████████████ (2.1 MiB)
             appbuilder-0.1.1-arm7.deb: ███████████████ (2.1 MiB)
    appbuilder-0.1.1-linux-arm7.tar.gz: ███████████████ (2.1 MiB)
             appbuilder-0.1.1-arm6.rpm: ███████████████ (2.1 MiB)
             appbuilder-0.1.1-arm6.deb: ███████████████ (2.1 MiB)
    appbuilder-0.1.1-linux-arm6.tar.gz: ███████████████ (2.1 MiB)
    appbuilder-0.1.1-windows-amd64.zip: ███████████████████████ (2.2 MiB)
  appbuilder-0.1.1-darwin-arm64.tar.gz: █████████████████████████ (2.2 MiB)
           appbuilder-0.1.1-x86_64.rpm: ███████████████████████████ (2.2 MiB)
   appbuilder-0.1.1-linux-amd64.tar.gz: ███████████████████████████ (2.2 MiB)
            appbuilder-0.1.1-amd64.deb: ███████████████████████████ (2.2 MiB)
  appbuilder-0.1.1-darwin-amd64.tar.gz: ████████████████████████████████████████ (2.3 MiB)
</code></pre><p>The transform supports a few options, all are optional:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>width</code></td><td>The width of the bar, defaults to 40</td></tr><tr><td><code>caption</code></td><td>The cpation to show above the graph, supports <a href=../templating>Templating</a></td></tr><tr><td><code>bytes</code></td><td>When set to true indicates that the numbers rendered after the bars will be bytes like in the example</td></tr></tbody></table><h2 id=line-graph>Line Graph</h2><p>This transform takes input of floats per line or a JSON document (array of floats) and turns it into a line graph.</p><p>Here we find the hourly forecast for our location and graph it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>Hourly weather forecast</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>exec</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pipeline</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>jq</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>query</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          </span>          <span style=color:#ae81ff>.weather[0].hourly|.[]|.FeelsLikeC</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>line_graph</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>width</span>: <span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>height</span>: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>caption</span>: <span style=color:#ae81ff>Hourly weather forecast (C)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>command</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  </span>  <span style=color:#ae81ff>curl -s wttr.in/?format=j1</span>
</span></span></code></pre></div><p>When run this produces:</p><pre tabindex=0><code class=language-nohighlight data-lang=nohighlight>$ demo linegraph
 30.00 ┤                      ╭─────╮
 29.90 ┤                     ╭╯     │
 29.80 ┤                    ╭╯      ╰╮
 29.70 ┤                    │        │
 29.60 ┤                   ╭╯        ╰╮
 29.50 ┤                   │          │
 29.40 ┤                  ╭╯          ╰╮
 29.30 ┤                  │            ╰╮
 29.20 ┤                 ╭╯             │
 29.10 ┤                ╭╯              ╰╮
 29.00 ┼────────────────╯                ╰─────
              Hourly weather forecast (C)
</code></pre><p>The transform supports a few options, all are optional:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>width</code></td><td>The width of the graph, defaults to 40</td></tr><tr><td><code>height</code></td><td>The height of the graph, defaults to 20</td></tr><tr><td><code>precision</code></td><td>The decimal precision to consider and render</td></tr><tr><td><code>json</code></td><td>When true expects JSON input like <code>[1,2,3,4]</code> rather than a float per line</td></tr><tr><td><code>caption</code></td><td>The caption to show above the graph, supports <a href=../templating>Templating</a></td></tr></tbody></table><h2 id=templates>Templates</h2><p>The <code>template</code> transform uses Golang templates and the <a href=http://masterminds.github.io/sprig/ target=_blank>sprig</a> functions
to facilitate creation of text output using a template language.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>template</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>exec</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>Demonstrates template processing of JSON input</span>
</span></span><span style=display:flex><span><span style=color:#f92672>command</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  </span>  <span style=color:#ae81ff>echo &#39;{&#34;name&#34;: &#34;James&#34;, &#34;surname&#34;:&#34;Bond&#34;}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>contents</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      </span>      <span style=color:#ae81ff>Hello {{ .Input.name }} {{ .Input.surname | swapcase }}</span>
</span></span></code></pre></div><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>contents</code></td><td>The body of the template embedded in the application yaml file</td></tr><tr><td><code>source</code></td><td>The file name holding the template, the file name is parsed using <a href=../templating>Templating</a></td></tr></tbody></table><h2 id=writing-to-a-file>Writing to a file</h2><p>Data entering a the <code>write_file</code> transform is written to disk and also returned, but optionally a message can be
returned.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>template</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>exec</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>Demonstrates template processing of JSON input</span>
</span></span><span style=display:flex><span><span style=color:#f92672>command</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  </span>  <span style=color:#ae81ff>echo &#39;{&#34;name&#34;: &#34;James&#34;, &#34;surname&#34;:&#34;Bond&#34;}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pipeline</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>write_file</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>file</span>: <span style=color:#ae81ff>/tmp/name.txt</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>replace</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>contents</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        </span>        <span style=color:#ae81ff>Hello {{ .Input.name }} {{ .Input.surname | swapcase }}</span>
</span></span></code></pre></div><p>Above the <code>/tmp/name.txt</code> would hold the initial JSON data.</p><p>If the <code>write_file</code> is the only transform or in a pipeline like here the data received is simply passed on to the next
step, this can be annoying when writing large files as they will be dumped to the screen.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>write_file</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>file</span>: <span style=color:#ae81ff>/tmp/report.txt</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>replace</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>message</span>: <span style=color:#ae81ff>Wrote {{.IBytes}} to {{.Target}}</span>
</span></span></code></pre></div><p>In this case the message <code>Wrote 1.8 KiB to /tmp/report.txt</code> would be printed. You can use <code>.Bytes</code>, <code>.IBytes</code>, <code>.Target</code> and <code>.Contents</code> in the <code>message</code>.</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>file</code></td><td>The file to write, the file name is parsed using <a href=../templating>Templating</a></td></tr><tr><td><code>message</code></td><td>A message to emit from the transform instead of the contents recieved by it</td></tr><tr><td><code>replace</code></td><td>Set to <code>true</code> to always overwrite the file</td></tr></tbody></table><h2 id=row-orientated-reports>Row orientated Reports</h2><p>These reports allow you to produce text reports for data found in JSON files. It reports on Array data and produce
paginated reports with optional headers and footers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>report</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>exec</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>Demonstrates using a report writer transform</span>
</span></span><span style=display:flex><span><span style=color:#f92672>command</span>: <span style=color:#ae81ff>curl -s https://api.github.com/repos/choria-io/appbuilder/releases/latest</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>report</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Asset Report</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>initial_query</span>: <span style=color:#ae81ff>assets</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>header</span>: |+<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      @|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      data.name
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      --------------------------------------------------------------------------------</span>      
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>body</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      Name: @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Size: @B###### Downloads: @##
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      row.name, row.size,              row.download_count</span>      
</span></span><span style=display:flex><span>    <span style=color:#f92672>footer</span>: <span style=color:#ae81ff>|+2</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>                                                                  <span style=color:#ae81ff>====================</span>
</span></span><span style=display:flex><span>                                                                  <span style=color:#f92672>Total Downloads</span>: @<span style=color:#75715e>##</span>
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>report.summary.download_count</span>
</span></span></code></pre></div><p>Here we fetch the latest release information from GitHub and produce a report with header,
footer and body. Since the JSON data from GitHub is a object we use the <code>assets</code> GJSON
query to find the rows of data to report on.</p><p>See the <a href=https://github.com/choria-io/goform target=_blank>goform</a> project for a full reference to
the formatting language.</p><pre tabindex=0><code class=language-nohighlight data-lang=nohighlight>                                 Release 0.2.1                                  
--------------------------------------------------------------------------------

Name: appbuilder-0.2.1-amd64.deb                   Size: 2.3 MiB  Downloads: 2  
Name: appbuilder-0.2.1-arm6.deb                    Size: 2.2 MiB  Downloads: 0  
Name: appbuilder-0.2.1-arm6.rpm                    Size: 2.1 MiB  Downloads: 0  
....
Name: appbuilder-0.2.1-windows-arm7.zip            Size: 2.1 MiB  Downloads: 0  
Name: appbuilder-0.2.1-x86_64.rpm                  Size: 2.2 MiB  Downloads: 2    

                                                            ====================
                                                            Total Downloads: 20 
</code></pre><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>The name of the report, parsed using <a href=../templating>Templating</a></td></tr><tr><td><code>header</code></td><td>The report header</td></tr><tr><td><code>body</code></td><td>The report body</td></tr><tr><td><code>footer</code></td><td>The report footer</td></tr><tr><td><code>rows_per_page</code></td><td>How many rows to print per page, pages each have <code>header</code> and <code>footer</code></td></tr><tr><td><code>initial_query</code></td><td>The initial GJSON query to use to find the row orientated data to report</td></tr><tr><td><code>source_file</code></td><td>A file holding the report rather than inline, <code>name</code>, <code>header</code>, <code>body</code> and <code>footer</code> are read from here. File name parsed using <a href=../templating>Templating</a></td></tr></tbody></table><h2 id=pipelines>Pipelines</h2><p>We&rsquo;ve seen a few example transform pipelines above, like this one here:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>exec</span>
</span></span><span style=display:flex><span><span style=color:#f92672>transform</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pipeline</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>jq</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>query</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          </span>          <span style=color:#ae81ff>.weather[0].hourly|.[]|.FeelsLikeC</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>line_graph</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>width</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>caption</span>: <span style=color:#ae81ff>Hourly weather forecast (C)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>command</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  </span>  <span style=color:#ae81ff>curl -s wttr.in/?format=j1</span>
</span></span></code></pre></div><p>This runs the output of the <code>curl</code> command (JSON weather forecast data) through a <code>jq</code> transform that produce results like:</p><pre tabindex=0><code class=language-nohighlight data-lang=nohighlight>29
29
29
29
30
30
29
29
</code></pre><p>We then feed that data into a <code>line_graph</code> and render it, the output from the <code>jq</code> transform is used as input to the <code>line_graph</code>.</p><p>Any failure in the pipeline will terminate processing.</p><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation dir=ltr><div id=header-wrapper class=default-animation><div id=header class=default-animation><img src=https://choria-io.github.io/appbuilder/logo.png></div><div class="searchbox default-animation"><i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=[]</script><script src=https://choria-io.github.io/appbuilder/js/auto-complete.js?1681828005 defer></script>
<script src=https://choria-io.github.io/appbuilder/js/lunr/lunr.min.js?1681828005 defer></script>
<script src=https://choria-io.github.io/appbuilder/js/lunr/lunr.stemmer.support.min.js?1681828005 defer></script>
<script src=https://choria-io.github.io/appbuilder/js/lunr/lunr.multi.min.js?1681828005 defer></script>
<script src=https://choria-io.github.io/appbuilder/js/search.js?1681828005 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=https://choria-io.github.io/appbuilder/index.html><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class=topics><li data-nav-id=/quick-start/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/quick-start/index.html><b>1. </b>Quick Start</a></li><li data-nav-id=/reference/index.html class="dd-item parent alwaysopen"><a href=https://choria-io.github.io/appbuilder/reference/index.html><b>2. </b>Reference</a><ul id=subsections-aaf4dc0c3ad418fa5118c9d2a0c2270f><li data-nav-id=/reference/common-settings/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/common-settings/index.html>Common Settings</a></li><li data-nav-id=/reference/parent/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/parent/index.html>Parent Command Type</a></li><li data-nav-id=/reference/exec/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/exec/index.html>Exec Command Type</a></li><li data-nav-id=/reference/discovery/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/discovery/index.html>Discover Command Type</a></li><li data-nav-id=/reference/rpc/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/rpc/index.html>Choria RPC Command Type</a></li><li data-nav-id=/reference/kv/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/kv/index.html>KV Command Type</a></li><li data-nav-id=/reference/templating/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/templating/index.html>Templating</a></li><li data-nav-id=/reference/transformations/index.html class="dd-item active"><a href=https://choria-io.github.io/appbuilder/reference/transformations/index.html>Transformations</a></li><li data-nav-id=/reference/configuration/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/configuration/index.html>Configuration</a></li><li data-nav-id=/reference/cheats/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/cheats/index.html>Cheat Sheets</a></li><li data-nav-id=/reference/file-locations/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/file-locations/index.html>File Locations</a></li><li data-nav-id=/reference/running-validation/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/reference/running-validation/index.html>Runtime Settings and Tools</a></li></ul></li><li data-nav-id=/experiments/index.html class=dd-item><a href=https://choria-io.github.io/appbuilder/experiments/index.html><b>3. </b>Experiments</a></li></ul><div id=shortcuts><div class=nav-title>More</div><ul><li><a class=padding href=https://github.com/choria-io/appbuilder><i class="fab fa-fw fa-github"></i> GitHub</a></li><li><a class=padding href=https://github.com/choria-io/appbuilder/releases><i class="far fa-save"></i> Download</a></li><li><a class=padding href=https://github.com/choria-io/appbuilder/discussions><i class="far fa-comments"></i> Discussions</a></li><li><a class=padding href=https://github.com/choria-io/appbuilder/issues><i class="far fa-life-ring"></i> Issues</a></li><li><a class=padding href=https://slack.puppet.com/><i class="fab fa-slack"></i> #choria</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class=footerVariantSwitch><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=my-custom-variant value=my-custom-variant selected>My Custom Variant</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=https://choria-io.github.io/appbuilder/js/clipboard.min.js?1681828005 defer></script>
<script src=https://choria-io.github.io/appbuilder/js/perfect-scrollbar.min.js?1681828005 defer></script>
<script src=https://choria-io.github.io/appbuilder/js/featherlight.min.js?1681828005 defer></script>
<script src=https://choria-io.github.io/appbuilder/js/theme.js?1681828005 defer></script></body></html>